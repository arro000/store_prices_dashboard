<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LISTINO PREZZI CANNABIS LIGHT</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.youtube.com/iframe_api"></script>
    <script  src="script.js"></script> 
    <script>
        // Aggiungi un parametro casuale a tutti i link CSS e script
        document.querySelectorAll('link[rel="stylesheet"], script[src]').forEach(el => {
            el.href = el.src = (el.href || el.src) + '?v=' + Math.random();
        });
    </script>
    
</head>
<body>
    <div id="youtube-player"></div>
    <div class="overlay"></div>
    <div class="store-name-container">
        <h1 id="shop-name"></h1>
    </div>
    <div class="action-button-container">
        <button id="openProductModalBtn" class="action-button">Gestisci Prodotti</button>
        <button id="openCategoryModalBtn" class="action-button">Gestisci Categorie</button>
        <button id="exportBtn" class="action-button">Esporta Configurazione</button>
        <button id="importBtn" class="action-button">Importa Configurazione</button>
        <button id="resetBtn" class="action-button">Ripristina Predefiniti</button>
        <button id="clearLocalStorageBtn" class="action-button">Elimina Dati Locali</button>
    </div>
    
    <div class="container-wrapper">
        <div id="container" class="container">
            <!-- Le categorie e i prodotti verranno inseriti qui dinamicamente da JavaScript -->
        </div>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Gestione Prodotti</h2>
            <form id="productForm">
                <select id="productAction">
                    <option value="add">Aggiungi Prodotto</option>
                    <option value="remove">Rimuovi Prodotto</option>
                    <option value="update">Aggiorna Prodotto</option>
                </select>
                <select id="category" required>
                    <option value="">Seleziona una categoria</option>
                    <!-- Le categorie verranno popolate dinamicamente da JavaScript -->
                </select>
                <input type="text" id="productName" placeholder="Nome Prodotto" required>
                <div id="productDetails">
                    <input type="text" id="price1g" placeholder="Prezzo 1g">
                    <input type="text" id="price2g" placeholder="Prezzo 2g">
                    <input type="text" id="price5g" placeholder="Prezzo 5g">
                    <script>
                        document.getElementById('category').addEventListener('change', function() {
                            const isTrinciato = this.value === 'TRINCIATO';
                            document.getElementById('price1g').placeholder = isTrinciato ? 'Prezzo 10g' : 'Prezzo 1g';
                            document.getElementById('price2g').placeholder = isTrinciato ? 'Prezzo 20g' : 'Prezzo 2g';
                            document.getElementById('price5g').placeholder = isTrinciato ? 'Prezzo 50g' : 'Prezzo 5g';
                        });
                    </script>
                    <label>
                        <input type="checkbox" id="offerta"> Offerta
                    </label>
                    <label>
                        <input type="checkbox" id="new"> Nuovo
                    </label>
                </div>
                <button type="submit">Esegui</button>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Gestione Categorie</h2>
            <form id="categoryForm">
                <select id="categoryAction">
                    <option value="add">Aggiungi Categoria</option>
                    <option value="remove">Rimuovi Categoria</option>
                    <option value="update">Aggiorna Categoria</option>
                </select>
                <input type="text" id="categoryName" placeholder="Nome Categoria" required>
                <input type="text" id="oldCategoryName" placeholder="Nome Categoria Vecchio (solo per aggiornamento)">
                <div id="categoryDetails">
                    <input type="text" id="categoryHeaders" placeholder="Intestazioni (separate da virgola)" required>
                </div>
                <button type="submit">Esegui</button>
            </form>
        </div>
    </div>
</body>
</html>
